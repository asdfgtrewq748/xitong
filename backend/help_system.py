# backend/help_system.py
"""
å¸®åŠ©å’Œå¼•å¯¼ç³»ç»Ÿ
æä¾›æ“ä½œæŒ‡å¼•ã€æç¤ºå’Œæ–‡æ¡£
"""

from typing import Dict, List, Optional
from enum import Enum


class TutorialStep(Enum):
    """æ•™ç¨‹æ­¥éª¤"""
    WELCOME = "welcome"
    UPLOAD_FILE = "upload_file"
    VIEW_DATA = "view_data"
    CREATE_MODEL = "create_model"
    EXPORT_RESULTS = "export_results"
    COMPLETED = "completed"


class HelpCategory(Enum):
    """å¸®åŠ©åˆ†ç±»"""
    GETTING_STARTED = "getting_started"
    DATA_IMPORT = "data_import"
    MODELING = "modeling"
    ANALYSIS = "analysis"
    EXPORT = "export"
    TROUBLESHOOTING = "troubleshooting"
    FAQ = "faq"


class HelpSystem:
    """å¸®åŠ©ç³»ç»Ÿ"""

    # æ–°æ‰‹æ•™ç¨‹é…ç½®
    TUTORIAL_STEPS = {
        TutorialStep.WELCOME: {
            "title": "æ¬¢è¿ä½¿ç”¨ç…¤å±‚åœ°è´¨å»ºæ¨¡ç³»ç»Ÿ",
            "content": "æœ¬ç³»ç»Ÿç”¨äºç…¤å±‚åœ°è´¨æ•°æ®ç®¡ç†å’Œ3Då»ºæ¨¡å¯è§†åŒ–ã€‚\n\nè®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªæ­¥éª¤å¿«é€Ÿä¸Šæ‰‹!",
            "target": "#app",
            "position": "center",
            "actions": ["å¼€å§‹æ•™ç¨‹", "è·³è¿‡"],
            "tips": [
                "ç³»ç»Ÿæ”¯æŒCSVå’ŒExcelæ ¼å¼çš„é’»å­”æ•°æ®",
                "å¯ä»¥è¿›è¡Œå¤šç§æ’å€¼æ–¹æ³•çš„3Då»ºæ¨¡",
                "æ”¯æŒå…³é”®å±‚åˆ†æå’Œæ•°æ®å¯¼å‡º"
            ]
        },

        TutorialStep.UPLOAD_FILE: {
            "title": "ç¬¬ä¸€æ­¥: ä¸Šä¼ é’»å­”æ•°æ®",
            "content": "ç‚¹å‡»'é’»å­”åˆ†æ'èœå•,ç„¶åä¸Šä¼ æ‚¨çš„é’»å­”æ•°æ®æ–‡ä»¶ã€‚\n\næ”¯æŒçš„æ ¼å¼: CSV, Excel (.xlsx, .xls)",
            "target": "#upload-button",
            "position": "bottom",
            "actions": ["ä¸‹ä¸€æ­¥", "è·³è¿‡"],
            "tips": [
                "ç¡®ä¿æ–‡ä»¶åŒ…å«å¿…éœ€åˆ—: å²©å±‚åç§°ã€åšåº¦",
                "å»ºè®®åŒ…å«å®Œæ•´çš„å²©çŸ³åŠ›å­¦å‚æ•°",
                "å¯ä»¥åŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶"
            ]
        },

        TutorialStep.VIEW_DATA: {
            "title": "ç¬¬äºŒæ­¥: æŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®",
            "content": "åœ¨æ•°æ®åº“æµè§ˆå™¨ä¸­,æ‚¨å¯ä»¥æŸ¥çœ‹ã€ç¼–è¾‘å’Œç®¡ç†å·²å¯¼å…¥çš„æ•°æ®ã€‚\n\næ”¯æŒæœç´¢ã€è¿‡æ»¤å’Œæ’åºåŠŸèƒ½ã€‚",
            "target": "#database-viewer",
            "position": "left",
            "actions": ["ä¸‹ä¸€æ­¥", "è·³è¿‡"],
            "tips": [
                "ç‚¹å‡»è¡Œå¯ä»¥ç¼–è¾‘æ•°æ®",
                "ä½¿ç”¨æœç´¢æ¡†å¿«é€Ÿå®šä½è®°å½•",
                "æ”¯æŒæ‰¹é‡åˆ é™¤æ“ä½œ"
            ]
        },

        TutorialStep.CREATE_MODEL: {
            "title": "ç¬¬ä¸‰æ­¥: åˆ›å»º3Dæ¨¡å‹",
            "content": "åœ¨'åœ°è´¨å»ºæ¨¡'æ¨¡å—,é€‰æ‹©æ’å€¼æ–¹æ³•å’Œå‚æ•°,ç”Ÿæˆ3Dç…¤å±‚æ¨¡å‹ã€‚\n\næä¾›å¤šç§æ’å€¼æ–¹æ³•ä¾›é€‰æ‹©ã€‚",
            "target": "#modeling-section",
            "position": "right",
            "actions": ["ä¸‹ä¸€æ­¥", "è·³è¿‡"],
            "tips": [
                "æ¨èä½¿ç”¨'æ™ºèƒ½æ’å€¼'è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹æ³•",
                "åˆ†è¾¨ç‡è¶Šé«˜,æ¨¡å‹è¶Šç²¾ç»†ä½†è®¡ç®—è¶Šæ…¢",
                "å¯ä»¥ä½¿ç”¨'æ’å€¼å¯¹æ¯”'é€‰æ‹©æœ€ä½³æ–¹æ³•"
            ]
        },

        TutorialStep.EXPORT_RESULTS: {
            "title": "ç¬¬å››æ­¥: å¯¼å‡ºç»“æœ",
            "content": "å®Œæˆå»ºæ¨¡å,å¯ä»¥å¯¼å‡ºæ•°æ®ã€å›¾è¡¨å’ŒæŠ¥å‘Šã€‚\n\næ”¯æŒå¤šç§æ ¼å¼: CSV, Excel, PDF, å›¾ç‰‡ã€‚",
            "target": "#export-button",
            "position": "top",
            "actions": ["å®Œæˆæ•™ç¨‹"],
            "tips": [
                "PDFæŠ¥å‘ŠåŒ…å«ç»Ÿè®¡æ•°æ®å’Œå¯è§†åŒ–å›¾è¡¨",
                "å›¾è¡¨å¯ä»¥å¯¼å‡ºä¸ºé«˜æ¸…PNGå›¾ç‰‡",
                "æ”¯æŒæ‰¹é‡å¯¼å‡ºå¤šä¸ªé’»å­”æ•°æ®"
            ]
        },

        TutorialStep.COMPLETED: {
            "title": "æ•™ç¨‹å®Œæˆ!",
            "content": "æ­å–œæ‚¨å®Œæˆæ–°æ‰‹æ•™ç¨‹!\n\nç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨ç³»ç»Ÿè¿›è¡Œåœ°è´¨å»ºæ¨¡äº†ã€‚\n\nå¦‚éœ€å¸®åŠ©,éšæ—¶ç‚¹å‡»å³ä¸Šè§’çš„'å¸®åŠ©'æŒ‰é’®ã€‚",
            "target": "#app",
            "position": "center",
            "actions": ["å¼€å§‹ä½¿ç”¨"],
            "tips": []
        }
    }

    # å¸®åŠ©æ–‡æ¡£
    HELP_DOCS = {
        HelpCategory.GETTING_STARTED: {
            "title": "å¿«é€Ÿå…¥é—¨",
            "icon": "ğŸš€",
            "sections": [
                {
                    "title": "ç³»ç»Ÿæ¦‚è¿°",
                    "content": "ç…¤å±‚åœ°è´¨å»ºæ¨¡ç³»ç»Ÿæ˜¯ä¸€ä¸ªç”¨äºç…¤å±‚åœ°è´¨æ•°æ®ç®¡ç†ã€åˆ†æå’Œ3Då¯è§†åŒ–çš„ä¸“ä¸šå·¥å…·ã€‚\n\nä¸»è¦åŠŸèƒ½:\n- é’»å­”æ•°æ®å¯¼å…¥å’Œç®¡ç†\n- å¤šç§æ’å€¼æ–¹æ³•çš„3Då»ºæ¨¡\n- å…³é”®å±‚åˆ†æ\n- æ•°æ®å¯è§†åŒ–å’Œå¯¼å‡º"
                },
                {
                    "title": "ç³»ç»Ÿè¦æ±‚",
                    "content": "æµè§ˆå™¨: Chrome 90+, Firefox 88+, Edge 90+\nå±å¹•åˆ†è¾¨ç‡: å»ºè®® 1920x1080 æˆ–æ›´é«˜\nç½‘ç»œ: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥"
                },
                {
                    "title": "åŸºæœ¬æµç¨‹",
                    "content": "1. å‡†å¤‡é’»å­”æ•°æ®æ–‡ä»¶ (CSVæˆ–Excel)\n2. ä¸Šä¼ æ•°æ®åˆ°ç³»ç»Ÿ\n3. æŸ¥çœ‹å’ŒéªŒè¯æ•°æ®\n4. é€‰æ‹©æ’å€¼æ–¹æ³•åˆ›å»º3Dæ¨¡å‹\n5. å¯¼å‡ºç»“æœå’ŒæŠ¥å‘Š"
                }
            ]
        },

        HelpCategory.DATA_IMPORT: {
            "title": "æ•°æ®å¯¼å…¥",
            "icon": "ğŸ“",
            "sections": [
                {
                    "title": "æ–‡ä»¶æ ¼å¼è¦æ±‚",
                    "content": "æ”¯æŒæ ¼å¼: CSV (.csv), Excel (.xlsx, .xls)\n\nå¿…éœ€åˆ—:\n- å²©å±‚åç§°\n- åšåº¦/m\n\nå¯é€‰åˆ—:\n- å¼¹æ€§æ¨¡é‡/GPa\n- å®¹é‡/kNÂ·m-3\n- æŠ—æ‹‰å¼ºåº¦/MPa"
                },
                {
                    "title": "å¯¼å…¥æ­¥éª¤",
                    "content": "1. ç‚¹å‡»'é’»å­”åˆ†æ'èœå•\n2. ç‚¹å‡»'ä¸Šä¼ æ–‡ä»¶'æŒ‰é’®\n3. é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶\n4. ç­‰å¾…å¤„ç†å®Œæˆ\n5. æŸ¥çœ‹å¯¼å…¥ç»“æœ"
                },
                {
                    "title": "å¸¸è§é—®é¢˜",
                    "content": "Q: æ–‡ä»¶ä¸Šä¼ å¤±è´¥?\nA: æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€å¤§å°(é™åˆ¶50MB)å’Œç¼–ç (æ¨èUTF-8)\n\nQ: ç¼ºå°‘å¿…éœ€åˆ—?\nA: ç¡®ä¿æ–‡ä»¶åŒ…å«'å²©å±‚åç§°'å’Œ'åšåº¦/m'åˆ—\n\nQ: æ•°æ®æ˜¾ç¤ºå¼‚å¸¸?\nA: ä½¿ç”¨'æ•°æ®éªŒè¯'åŠŸèƒ½æ£€æŸ¥æ•°æ®è´¨é‡"
                }
            ]
        },

        HelpCategory.MODELING: {
            "title": "åœ°è´¨å»ºæ¨¡",
            "icon": "ğŸ”ï¸",
            "sections": [
                {
                    "title": "æ’å€¼æ–¹æ³•ä»‹ç»",
                    "content": "ç³»ç»Ÿæä¾›å¤šç§æ’å€¼æ–¹æ³•:\n\n- çº¿æ€§æ’å€¼: å¿«é€Ÿ,é€‚åˆæ•°æ®ç‚¹è¾ƒå°‘\n- ä¸‰æ¬¡æ ·æ¡: å¹³æ»‘,éœ€è¦16ä¸ªä»¥ä¸Šç‚¹\n- å…‹é‡Œé‡‘æ’å€¼: ç²¾ç¡®,è€ƒè™‘ç©ºé—´ç›¸å…³æ€§\n- æ™ºèƒ½æ’å€¼: è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹æ³•(æ¨è)"
                },
                {
                    "title": "å‚æ•°è¯´æ˜",
                    "content": "åˆ†è¾¨ç‡: ç½‘æ ¼å¯†åº¦,èŒƒå›´20-200\n- ä½åˆ†è¾¨ç‡(20-50): å¿«é€Ÿé¢„è§ˆ\n- ä¸­åˆ†è¾¨ç‡(50-100): å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦\n- é«˜åˆ†è¾¨ç‡(100-200): é«˜è´¨é‡,è®¡ç®—è¾ƒæ…¢\n\nåŸºå‡†é«˜ç¨‹: æ¨¡å‹åº•éƒ¨é«˜ç¨‹\nç…¤å±‚é—´éš™: ç›¸é‚»ç…¤å±‚é—´çš„é—´éš”"
                },
                {
                    "title": "æ’å€¼å¯¹æ¯”",
                    "content": "ä½¿ç”¨'æ’å€¼å¯¹æ¯”'åŠŸèƒ½æ¯”è¾ƒä¸åŒæ–¹æ³•:\n\n1. é€‰æ‹©è¦å¯¹æ¯”çš„æ–¹æ³•\n2. ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—å„æ–¹æ³•çš„ç²¾åº¦æŒ‡æ ‡\n3. æŸ¥çœ‹MAE, RMSE, RÂ²ç­‰æŒ‡æ ‡\n4. é€‰æ‹©æœ€ä¼˜æ–¹æ³•è¿›è¡Œå»ºæ¨¡"
                }
            ]
        },

        HelpCategory.ANALYSIS: {
            "title": "æ•°æ®åˆ†æ",
            "icon": "ğŸ“Š",
            "sections": [
                {
                    "title": "å…³é”®å±‚åˆ†æ",
                    "content": "å…³é”®å±‚åˆ†æç”¨äºè¯†åˆ«ç…¤å±‚ä¸Šè¦†å²©å±‚ä¸­çš„å…³é”®æ§åˆ¶å±‚ã€‚\n\nå¿…éœ€æ•°æ®:\n- å²©å±‚åšåº¦\n- å¼¹æ€§æ¨¡é‡\n- å®¹é‡\n- æŠ—æ‹‰å¼ºåº¦\n\nç»“æœåŒ…æ‹¬:\n- å…³é”®å±‚ä½ç½®(SK1, SK2, ...)\n- ä¸»å…³é”®å±‚(PKS)\n- è·ç…¤å±‚è·ç¦»"
                },
                {
                    "title": "æ•°æ®ç»Ÿè®¡",
                    "content": "ç³»ç»Ÿæä¾›ä¸°å¯Œçš„ç»Ÿè®¡åŠŸèƒ½:\n\n- åŸºæœ¬ç»Ÿè®¡: æ€»è®°å½•æ•°ã€é’»å­”æ•°ã€çœä»½æ•°\n- å²©æ€§ç»Ÿè®¡: å„ç±»å²©æ€§åˆ†å¸ƒå’Œå æ¯”\n- å‚æ•°ç»Ÿè®¡: åšåº¦ã€å¼ºåº¦ç­‰å‚æ•°çš„å¹³å‡å€¼ã€æœ€å¤§æœ€å°å€¼\n- çœä»½åˆ†å¸ƒ: å„çœä»½é’»å­”æ•°é‡å’Œåˆ†å¸ƒ"
                },
                {
                    "title": "å¯è§†åŒ–å›¾è¡¨",
                    "content": "æ”¯æŒå¤šç§å›¾è¡¨ç±»å‹:\n\n- æŸ±çŠ¶å›¾: å²©æ€§åˆ†å¸ƒã€çœä»½ç»Ÿè®¡\n- é¥¼å›¾: å æ¯”åˆ†æ\n- ç«ç‘°å›¾: å¤šç»´åº¦åˆ†å¸ƒ\n- é›·è¾¾å›¾: å‚æ•°å¯¹æ¯”\n- çƒ­åŠ›å›¾: ç©ºé—´åˆ†å¸ƒ\n- 3Dæ¨¡å‹: ç…¤å±‚ç«‹ä½“å±•ç¤º"
                }
            ]
        },

        HelpCategory.EXPORT: {
            "title": "å¯¼å‡ºåŠŸèƒ½",
            "icon": "ğŸ’¾",
            "sections": [
                {
                    "title": "æ•°æ®å¯¼å‡º",
                    "content": "æ”¯æŒçš„æ ¼å¼:\n- CSV: é€šç”¨æ•°æ®æ ¼å¼\n- Excel: åŒ…å«æ ¼å¼çš„ç”µå­è¡¨æ ¼\n- JSON: ç¨‹åºåŒ–å¤„ç†\n\nå¯¼å‡ºé€‰é¡¹:\n- å¯¼å‡ºå…¨éƒ¨æ•°æ®\n- å¯¼å‡ºç­›é€‰åçš„æ•°æ®\n- å¯¼å‡ºé€‰ä¸­çš„è®°å½•"
                },
                {
                    "title": "å›¾è¡¨å¯¼å‡º",
                    "content": "å›¾è¡¨å¯ä»¥å¯¼å‡ºä¸º:\n- PNG: é«˜æ¸…å›¾ç‰‡(æ¨è)\n- JPG: å‹ç¼©å›¾ç‰‡\n- SVG: çŸ¢é‡å›¾(å¯ç¼©æ”¾)\n\nå¯¼å‡ºè®¾ç½®:\n- åˆ†è¾¨ç‡: 800x600 åˆ° 4K\n- èƒŒæ™¯: é€æ˜æˆ–ç™½è‰²\n- åŒ…å«æ ‡é¢˜å’Œå›¾ä¾‹"
                },
                {
                    "title": "PDFæŠ¥å‘Š",
                    "content": "è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šæŠ¥å‘Š:\n\næŠ¥å‘Šå†…å®¹:\n- å°é¢: é¡¹ç›®ä¿¡æ¯å’Œæ—¥æœŸ\n- æ•°æ®ç»Ÿè®¡: æ±‡æ€»è¡¨æ ¼\n- å¯è§†åŒ–å›¾è¡¨: è‡ªåŠ¨æˆªå›¾\n- åˆ†æç»“è®º: è‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨ç¼–è¾‘\n\né€‚ç”¨åœºæ™¯:\n- é¡¹ç›®æ±‡æŠ¥\n- å­˜æ¡£å¤‡ä»½\n- å¯¹å¤–åˆ†äº«"
                }
            ]
        },

        HelpCategory.TROUBLESHOOTING: {
            "title": "æ•…éšœæ’é™¤",
            "icon": "ğŸ”§",
            "sections": [
                {
                    "title": "å¸¸è§é”™è¯¯",
                    "content": "1. æ’å€¼å¤±è´¥\nåŸå› : æ•°æ®ç‚¹å¤ªå°‘æˆ–åˆ†å¸ƒä¸å‡\nè§£å†³: å¢åŠ æ•°æ®ç‚¹æˆ–ä½¿ç”¨æ›´ç®€å•çš„æ’å€¼æ–¹æ³•\n\n2. è®¡ç®—è¶…æ—¶\nåŸå› : åˆ†è¾¨ç‡è¿‡é«˜æˆ–æ•°æ®é‡è¿‡å¤§\nè§£å†³: é™ä½åˆ†è¾¨ç‡æˆ–åˆ†æ‰¹å¤„ç†\n\n3. æ–‡ä»¶ä¸Šä¼ å¤±è´¥\nåŸå› : æ–‡ä»¶è¿‡å¤§ã€æ ¼å¼é”™è¯¯æˆ–ç½‘ç»œé—®é¢˜\nè§£å†³: æ£€æŸ¥æ–‡ä»¶æ ¼å¼,å‹ç¼©æ•°æ®,é‡è¯•"
                },
                {
                    "title": "æ€§èƒ½ä¼˜åŒ–",
                    "content": "æå‡ç³»ç»Ÿæ€§èƒ½çš„å»ºè®®:\n\n1. é™ä½ç½‘æ ¼åˆ†è¾¨ç‡\n2. å…³é—­ä¸å¿…è¦çš„å¯è§†åŒ–\n3. æ¸…ç†æµè§ˆå™¨ç¼“å­˜\n4. ä½¿ç”¨é«˜æ€§èƒ½ç”µè„‘\n5. é¿å…åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µ"
                },
                {
                    "title": "æ•°æ®è´¨é‡é—®é¢˜",
                    "content": "å¦‚ä½•æ”¹å–„æ•°æ®è´¨é‡:\n\n1. ä½¿ç”¨'æ•°æ®éªŒè¯'åŠŸèƒ½è‡ªåŠ¨æ£€æŸ¥\n2. åˆ é™¤æˆ–ä¿®æ­£å¼‚å¸¸å€¼\n3. è¡¥å……ç¼ºå¤±çš„å‚æ•°\n4. ç¡®ä¿åæ ‡å‡†ç¡®æ€§\n5. ä½¿ç”¨æ ‡å‡†å•ä½(ç±³ã€GPaã€kN/mÂ³ç­‰)"
                }
            ]
        },

        HelpCategory.FAQ: {
            "title": "å¸¸è§é—®é¢˜",
            "icon": "â“",
            "sections": [
                {
                    "title": "è´¦å·å’Œæƒé™",
                    "content": "Q: éœ€è¦æ³¨å†Œè´¦å·å—?\nA: ç›®å‰ç³»ç»Ÿå¼€æ”¾ä½¿ç”¨,æ— éœ€æ³¨å†Œã€‚æœªæ¥ç‰ˆæœ¬å°†æ”¯æŒè´¦å·ç®¡ç†ã€‚\n\nQ: æ•°æ®ä¼šä¿å­˜å—?\nA: æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨å’ŒæœåŠ¡å™¨æ•°æ®åº“ä¸­ã€‚\n\nQ: å¯ä»¥åˆ†äº«æ•°æ®å—?\nA: å¯ä»¥å¯¼å‡ºæ•°æ®æ–‡ä»¶æˆ–PDFæŠ¥å‘Šåˆ†äº«ç»™ä»–äººã€‚"
                },
                {
                    "title": "åŠŸèƒ½ç›¸å…³",
                    "content": "Q: æ”¯æŒå“ªäº›åœ°åŒºçš„æ•°æ®?\nA: æ”¯æŒå…¨å›½èŒƒå›´çš„ç…¤å±‚åœ°è´¨æ•°æ®ã€‚\n\nQ: å¯ä»¥å¯¼å…¥å¤šä¸ªé’»å­”å—?\nA: å¯ä»¥,æ”¯æŒæ‰¹é‡å¯¼å…¥å’Œåˆå¹¶åˆ†æã€‚\n\nQ: 3Dæ¨¡å‹å¯ä»¥æ—‹è½¬æŸ¥çœ‹å—?\nA: å¯ä»¥,ä½¿ç”¨é¼ æ ‡æ‹–åŠ¨æ—‹è½¬,æ»šè½®ç¼©æ”¾ã€‚"
                },
                {
                    "title": "æŠ€æœ¯æ”¯æŒ",
                    "content": "Q: é‡åˆ°é—®é¢˜æ€ä¹ˆåŠ?\nA: 1. æŸ¥çœ‹æœ¬å¸®åŠ©æ–‡æ¡£\n2. æŸ¥çœ‹é”™è¯¯æç¤ºå’Œå»ºè®®\n3. è”ç³»æŠ€æœ¯æ”¯æŒ\n\nQ: å¦‚ä½•åé¦ˆå»ºè®®?\nA: æ¬¢è¿é€šè¿‡é‚®ä»¶æˆ–GitHubæäº¤åé¦ˆå’Œå»ºè®®ã€‚"
                }
            ]
        }
    }

    @classmethod
    def get_tutorial_step(cls, step: TutorialStep) -> Dict:
        """è·å–æ•™ç¨‹æ­¥éª¤"""
        return cls.TUTORIAL_STEPS.get(step, {})

    @classmethod
    def get_all_tutorial_steps(cls) -> List[Dict]:
        """è·å–æ‰€æœ‰æ•™ç¨‹æ­¥éª¤"""
        return [
            {
                "step": step.value,
                **data
            }
            for step, data in cls.TUTORIAL_STEPS.items()
        ]

    @classmethod
    def get_help_doc(cls, category: HelpCategory) -> Dict:
        """è·å–å¸®åŠ©æ–‡æ¡£"""
        return cls.HELP_DOCS.get(category, {})

    @classmethod
    def get_all_help_categories(cls) -> List[Dict]:
        """è·å–æ‰€æœ‰å¸®åŠ©åˆ†ç±»"""
        return [
            {
                "category": category.value,
                **data
            }
            for category, data in cls.HELP_DOCS.items()
        ]

    @classmethod
    def search_help(cls, keyword: str) -> List[Dict]:
        """æœç´¢å¸®åŠ©æ–‡æ¡£"""
        results = []
        keyword_lower = keyword.lower()

        for category, doc in cls.HELP_DOCS.items():
            if keyword_lower in doc["title"].lower():
                results.append({
                    "category": category.value,
                    "title": doc["title"],
                    "match_type": "title"
                })

            for section in doc["sections"]:
                if (keyword_lower in section["title"].lower() or
                    keyword_lower in section["content"].lower()):
                    results.append({
                        "category": category.value,
                        "title": doc["title"],
                        "section": section["title"],
                        "match_type": "content"
                    })

        return results


# ä¾¿æ·å‡½æ•°
def get_tutorial() -> List[Dict]:
    """è·å–æ–°æ‰‹æ•™ç¨‹"""
    return HelpSystem.get_all_tutorial_steps()


def get_help_docs() -> List[Dict]:
    """è·å–æ‰€æœ‰å¸®åŠ©æ–‡æ¡£"""
    return HelpSystem.get_all_help_categories()


def search_help(keyword: str) -> List[Dict]:
    """æœç´¢å¸®åŠ©"""
    return HelpSystem.search_help(keyword)
